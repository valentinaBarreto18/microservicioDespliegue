â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          SISTEMA DE MICROSERVICIOS PARA BIBLIOTECA                      â”‚
â”‚         Spring Boot + ProgramaciÃ³n Reactiva + PostgreSQL                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ESTRUCTURA COMPLETA DEL PROYECTO:
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

biblioteca-microservices/
â”‚
â”œâ”€â”€ ğŸ“‹ pom.xml                          â† POM Parent del proyecto multi-mÃ³dulo
â”‚
â”œâ”€â”€ ğŸ³ docker-compose.yml               â† OrquestaciÃ³n completa (3 servicios + 2 BD)
â”œâ”€â”€ ğŸ“ .dockerignore
â”œâ”€â”€ ğŸ“ .gitignore
â”‚
â”œâ”€â”€ ğŸ“š README.md                        â† DocumentaciÃ³n completa
â”œâ”€â”€ ğŸš€ INICIO-RAPIDO.md                 â† GuÃ­a de inicio rÃ¡pido
â”œâ”€â”€ ğŸ“¡ EJEMPLOS-API.md                  â† Ejemplos de todas las APIs
â”œâ”€â”€ ğŸ“‚ ESTRUCTURA-PROYECTO.txt          â† Este archivo
â”‚
â”œâ”€â”€ ğŸ—„ï¸ database/                        â† Scripts de base de datos PostgreSQL
â”‚   â”œâ”€â”€ init-inventory-db.sql          â† Schema + datos para inventory_db
â”‚   â””â”€â”€ init-loan-db.sql               â† Schema + datos para loan_db
â”‚
â”œâ”€â”€ ğŸ“® postman/                         â† ColecciÃ³n de Postman completa
â”‚   â””â”€â”€ Biblioteca-Microservices.postman_collection.json
â”‚
â”œâ”€â”€ ğŸŒ api-gateway/                     â† API GATEWAY (Puerto 8080)
â”‚   â”œâ”€â”€ ğŸ“‹ pom.xml
â”‚   â”œâ”€â”€ ğŸ³ Dockerfile
â”‚   â””â”€â”€ src/main/
â”‚       â”œâ”€â”€ java/com/biblioteca/gateway/
â”‚       â”‚   â”œâ”€â”€ ApiGatewayApplication.java
â”‚       â”‚   â””â”€â”€ controller/
â”‚       â”‚       â””â”€â”€ FallbackController.java
â”‚       â””â”€â”€ resources/
â”‚           â””â”€â”€ application.yml        â† ConfiguraciÃ³n de rutas y circuit breaker
â”‚
â”œâ”€â”€ ğŸ“¦ inventory-service/               â† SERVICIO DE INVENTARIO (Puerto 8081)
â”‚   â”œâ”€â”€ ğŸ“‹ pom.xml                     â† Dependencias: WebFlux, R2DBC, PostgreSQL
â”‚   â”œâ”€â”€ ğŸ³ Dockerfile
â”‚   â””â”€â”€ src/main/
â”‚       â”œâ”€â”€ java/com/biblioteca/inventory/
â”‚       â”‚   â”œâ”€â”€ InventoryServiceApplication.java
â”‚       â”‚   â”‚
â”‚       â”‚   â”œâ”€â”€ model/
â”‚       â”‚   â”‚   â””â”€â”€ Book.java          â† Record para entidad Book
â”‚       â”‚   â”‚
â”‚       â”‚   â”œâ”€â”€ dto/
â”‚       â”‚   â”‚   â”œâ”€â”€ BookRequest.java   â† Record para peticiones
â”‚       â”‚   â”‚   â””â”€â”€ BookResponse.java  â† Record para respuestas
â”‚       â”‚   â”‚
â”‚       â”‚   â”œâ”€â”€ repository/
â”‚       â”‚   â”‚   â””â”€â”€ BookRepository.java â† R2dbcRepository reactivo
â”‚       â”‚   â”‚
â”‚       â”‚   â”œâ”€â”€ service/
â”‚       â”‚   â”‚   â””â”€â”€ BookService.java   â† LÃ³gica de negocio (Mono/Flux)
â”‚       â”‚   â”‚
â”‚       â”‚   â””â”€â”€ controller/
â”‚       â”‚       â””â”€â”€ BookController.java â† REST Controller reactivo
â”‚       â”‚
â”‚       â””â”€â”€ resources/
â”‚           â”œâ”€â”€ application.yml        â† Config R2DBC + PostgreSQL
â”‚           â””â”€â”€ schema.sql             â† Schema de tabla books
â”‚
â”œâ”€â”€ ğŸ“– loan-service/                    â† SERVICIO DE PRÃ‰STAMOS (Puerto 8082)
â”‚   â”œâ”€â”€ ğŸ“‹ pom.xml                     â† Dependencias: WebFlux, R2DBC, PostgreSQL
â”‚   â”œâ”€â”€ ğŸ³ Dockerfile
â”‚   â””â”€â”€ src/main/
â”‚       â”œâ”€â”€ java/com/biblioteca/loan/
â”‚       â”‚   â”œâ”€â”€ LoanServiceApplication.java
â”‚       â”‚   â”‚
â”‚       â”‚   â”œâ”€â”€ model/
â”‚       â”‚   â”‚   â”œâ”€â”€ Loan.java          â† Record para entidad Loan
â”‚       â”‚   â”‚   â””â”€â”€ LoanStatus.java    â† Enum (ACTIVE, RETURNED, OVERDUE, CANCELLED)
â”‚       â”‚   â”‚
â”‚       â”‚   â”œâ”€â”€ dto/
â”‚       â”‚   â”‚   â”œâ”€â”€ LoanRequest.java   â† Record para peticiones
â”‚       â”‚   â”‚   â””â”€â”€ LoanResponse.java  â† Record para respuestas
â”‚       â”‚   â”‚
â”‚       â”‚   â”œâ”€â”€ repository/
â”‚       â”‚   â”‚   â””â”€â”€ LoanRepository.java â† R2dbcRepository reactivo
â”‚       â”‚   â”‚
â”‚       â”‚   â”œâ”€â”€ service/
â”‚       â”‚   â”‚   â””â”€â”€ LoanService.java   â† LÃ³gica de negocio + WebClient
â”‚       â”‚   â”‚
â”‚       â”‚   â”œâ”€â”€ controller/
â”‚       â”‚   â”‚   â””â”€â”€ LoanController.java â† REST Controller reactivo
â”‚       â”‚   â”‚
â”‚       â”‚   â””â”€â”€ config/
â”‚       â”‚       â””â”€â”€ WebClientConfig.java â† Config para comunicaciÃ³n entre servicios
â”‚       â”‚
â”‚       â””â”€â”€ resources/
â”‚           â”œâ”€â”€ application.yml        â† Config R2DBC + PostgreSQL
â”‚           â””â”€â”€ schema.sql             â† Schema de tabla loans

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
TECNOLOGÃAS IMPLEMENTADAS:
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âœ… Java 17
âœ… Spring Boot 3.2.0
âœ… Spring WebFlux (ProgramaciÃ³n Reactiva)
âœ… Spring Cloud Gateway
âœ… R2DBC PostgreSQL (Acceso reactivo a base de datos)
âœ… PostgreSQL 15
âœ… Project Reactor (Mono y Flux)
âœ… Java Records (para DTOs y modelos)
âœ… Bean Validation
âœ… Lombok
âœ… Spring Boot Actuator (Health Checks)
âœ… Docker & Docker Compose
âœ… Maven (proyecto multi-mÃ³dulo)

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
BASE DE DATOS POSTGRESQL:
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“Š DATABASE: inventory_db (Puerto 5432)
   â””â”€â”€ TABLE: books
       â”œâ”€â”€ id (BIGSERIAL PRIMARY KEY)
       â”œâ”€â”€ isbn (VARCHAR UNIQUE)
       â”œâ”€â”€ title, author, publisher
       â”œâ”€â”€ publication_year, category
       â”œâ”€â”€ total_copies, available_copies
       â”œâ”€â”€ description
       â””â”€â”€ timestamps
       
       ğŸ“¦ 10 libros de ejemplo precargados
       ğŸ” Ãndices en: isbn, author, title, category, available_copies

ğŸ“Š DATABASE: loan_db (Puerto 5433)
   â””â”€â”€ TABLE: loans
       â”œâ”€â”€ id (BIGSERIAL PRIMARY KEY)
       â”œâ”€â”€ book_id (BIGINT)
       â”œâ”€â”€ user_email, user_name
       â”œâ”€â”€ loan_date, due_date, return_date
       â”œâ”€â”€ status (ENUM: ACTIVE, RETURNED, OVERDUE, CANCELLED)
       â”œâ”€â”€ notes
       â””â”€â”€ timestamps
       
       ğŸ“¦ 6 prÃ©stamos de ejemplo precargados
       ğŸ” Ãndices en: book_id, user_email, status, due_date

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ARQUITECTURA DE MICROSERVICIOS:
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

                         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                         â”‚   POSTMAN /     â”‚
                         â”‚   CLIENTE HTTP  â”‚
                         â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â”‚
                                  â”‚ http://localhost:8080
                                  â”‚
                         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
                         â”‚  API GATEWAY    â”‚
                         â”‚   (Puerto 8080) â”‚
                         â”‚  Spring Cloud   â”‚
                         â”‚    Gateway      â”‚
                         â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                              â”‚      â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚                           â”‚
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚ INVENTORY SERVICE  â”‚    â”‚   LOAN SERVICE     â”‚
          â”‚   (Puerto 8081)    â”‚â—„â”€â”€â”€â”¤   (Puerto 8082)    â”‚
          â”‚  GestiÃ³n Libros    â”‚    â”‚ GestiÃ³n PrÃ©stamos  â”‚
          â”‚    Spring WebFlux  â”‚    â”‚   Spring WebFlux   â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚                          â”‚
                    â”‚ R2DBC                    â”‚ R2DBC
                    â”‚                          â”‚
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚  PostgreSQL        â”‚    â”‚  PostgreSQL        â”‚
          â”‚  inventory_db      â”‚    â”‚  loan_db           â”‚
          â”‚  (Puerto 5432)     â”‚    â”‚  (Puerto 5433)     â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ENDPOINTS DISPONIBLES (vÃ­a API Gateway en puerto 8080):
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“š INVENTORY SERVICE - /api/books:
   GET    /api/books                           â† Obtener todos los libros
   GET    /api/books/{id}                      â† Obtener libro por ID
   GET    /api/books/isbn/{isbn}               â† Obtener por ISBN
   GET    /api/books/search/author?name=...    â† Buscar por autor
   GET    /api/books/search/title?name=...     â† Buscar por tÃ­tulo
   GET    /api/books/category/{category}       â† Filtrar por categorÃ­a
   GET    /api/books/available                 â† Solo disponibles
   GET    /api/books/{id}/availability         â† Verificar disponibilidad
   POST   /api/books                           â† Crear libro
   PUT    /api/books/{id}                      â† Actualizar libro
   DELETE /api/books/{id}                      â† Eliminar libro
   POST   /api/books/{id}/decrement            â† Decrementar copias
   POST   /api/books/{id}/increment            â† Incrementar copias

ğŸ“– LOAN SERVICE - /api/loans:
   GET    /api/loans                           â† Obtener todos
   GET    /api/loans/{id}                      â† Obtener por ID
   GET    /api/loans/user/{email}              â† PrÃ©stamos de usuario
   GET    /api/loans/user/{email}/active       â† PrÃ©stamos activos de usuario
   GET    /api/loans/book/{bookId}             â† PrÃ©stamos de un libro
   GET    /api/loans/status/{status}           â† Filtrar por estado
   GET    /api/loans/overdue                   â† Solo vencidos
   POST   /api/loans                           â† Crear prÃ©stamo
   POST   /api/loans/{id}/return               â† Devolver libro
   POST   /api/loans/{id}/renew?newDueDate=... â† Renovar prÃ©stamo
   POST   /api/loans/{id}/cancel               â† Cancelar prÃ©stamo
   POST   /api/loans/update-overdue            â† Actualizar vencidos

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
CARACTERÃSTICAS REACTIVAS:
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âœ… Mono<T>         - Para operaciones que retornan 0 o 1 elemento
âœ… Flux<T>         - Para operaciones que retornan 0..N elementos
âœ… R2DBC           - Acceso reactivo no bloqueante a PostgreSQL
âœ… WebFlux         - Framework web reactivo
âœ… WebClient       - Cliente HTTP reactivo (comunicaciÃ³n entre servicios)
âœ… Backpressure    - Control de flujo de datos
âœ… Non-blocking IO - Alto rendimiento y escalabilidad

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
CÃ“MO EJECUTAR:
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

1ï¸âƒ£  docker-compose up --build
2ï¸âƒ£  Esperar 2-3 minutos
3ï¸âƒ£  Importar colecciÃ³n de Postman
4ï¸âƒ£  Probar endpoints en http://localhost:8080

Ver mÃ¡s detalles en INICIO-RAPIDO.md

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ARCHIVOS TOTALES CREADOS: 35+
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

